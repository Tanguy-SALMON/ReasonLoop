#!/bin/bash

# Simple pre-commit hook for ReasonLoop
# To skip: git commit --no-verify

echo "Running pre-commit checks..."

# Get staged Python files
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep '\.py$')

if [ -z "$STAGED_FILES" ]; then
    echo "No Python files staged. Skipping checks."
    exit 0
fi

# Check Python syntax
echo "Checking Python syntax..."
for file in $STAGED_FILES; do
    if [ -f "$file" ]; then
        python3 -m py_compile "$file" 2>&1
        if [ $? -ne 0 ]; then
            echo "Syntax error in $file"
            exit 1
        fi
    fi
done

echo "All checks passed!"
exit 0
